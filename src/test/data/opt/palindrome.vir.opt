module palindrome

export function b $palindrome(w %n) {
@2:
  jmp @3(0x0_w, %n)
@3(%rev.2, %n.1):
  %0 = ne.w %n.1, 0x0_w ; @15
  br %0, @6, @7
@6:
  %1 = mulh.w %n.1, 0x1999999a_w ; @16
  %2 = lsr.w %1, 0x1f_w ; @17
  %3 = add.w %1, %2 ; @18
  %4 = mul.w %3, 0xa_w ; @19
  %5 = sub.w %n.1, %4 ; @20
  %11 = lsl.w %rev.2, 0x3_w ; @26
  %12 = lsl.w %rev.2, 0x1_w ; @27
  %13 = add.w %11, %12 ; @28
  %14 = add.w %13, %5 ; @29
  jmp @3(%14, %3)
@7:
  %17 = eq.w %n, %rev.2 ; @32
  %18 = flag.b %17 ; @33
  ret %18
}
