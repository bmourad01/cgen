module ifc1

;; diamond
export function w $foo(w %x) {
@start:
  %c = slt.w %x, 0_w
  br %c, @neg, @pos
@neg:
  %y = add.w %x, 5_w
  jmp @join
@pos:
  %y = sub.w %x, 5_w
  jmp @join
@join:
  ret %y
}

;; right-leaning triangle
export function w $bar(w %x) {
@start:
  %c = slt.w %x, 0_w
  br %c, @join, @pos
@pos:
  %x = sub.w %x, 5_w
  jmp @join
@join:
  ret %x
}

;; left-leaning triangle
export function w $baz(w %x) {
@start:
  %c = slt.w %x, 0_w
  br %c, @neg, @join
@neg:
  %x = add.w %x, 5_w
  jmp @join
@join:
  ret %x
}

;; diamond that is too expensive to hoist
export function w $quux(w %x) {
@start:
  %c = slt.w %x, 0_w
  br %c, @neg, @pos
@neg:
  %y = add.w %x, 5_w
  %y = mul.w %y, 13_w
  jmp @join
@pos:
  %y = sub.w %x, 5_w
  %y = div.w %y, 3_w
  jmp @join
@join:
  ret %y
}
