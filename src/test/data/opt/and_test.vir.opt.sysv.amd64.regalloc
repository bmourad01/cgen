module and_test

export function $foo { ; returns: rax
@2:
  mov eax, edi ; @48
  and eax, 0x3_w ; @49
  cmove edi, esi ; @44
  mov eax, edi ; @41
  ret ; @42
}

export function $bar { ; returns: rax
@10:
  test edi, 0x3_w ; @56
  je @11 ; @57
@12:
  lea eax, qword ptr [rdi + 0x1] ; @34
  jmp @15 ; @55
@11:
  lea eax, qword ptr [rsi + 0x1] ; @33
@15:
  ret ; @51
}

export function $baz { ; returns: rax
@18:
  mov rax, rdi ; @86
  and rax, 0x3_l ; @87
  je @19 ; @76
  dec rax ; @78
  cmp rax, 0x2_l ; @79
  ja @19 ; @80
  lea rcx, qword ptr [rip + @74] ; @81
  movsxd rax, dword ptr [rcx + rax*4] ; @82
  add rax, rcx ; @83
  jmp rax ; @84
  .tbl @74 [@20, @21, @22] ; @85
@22:
  lea rax, qword ptr [rdi + 0x4] ; @39
  jmp @24 ; @73
@21:
  lea rax, qword ptr [rdi + 0x3] ; @38
  jmp @24 ; @71
@20:
  lea rax, qword ptr [rdi + 0x2] ; @37
  jmp @24 ; @69
@19:
  lea rax, qword ptr [rdi + 0x1] ; @36
@24:
  ret ; @65
}
