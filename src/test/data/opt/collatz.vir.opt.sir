module foo

export function w $foo(w %n) {
start:
  %x.2 = copy.w %n;
  %count.2 = copy.w 0x0_w;
  while gt.w %x.2, 0x1_w {
    %2 = and.w %x.2, 0x1_w;
    %3 = eq.w %2, 0x0_w;
    %4 = lsr.w %x.2, 0x1_w;
    %5 = lsl.w %x.2, 0x1_w;
    %6 = add.w %5, %x.2;
    %7 = add.w %6, 0x1_w;
    %8 = sel.w %3, %4, %7;
    %9 = add.w %count.2, 0x1_w;
    %x.2 = copy.w %8;
    %count.2 = copy.w %9
  };
  ret %count.2
}
